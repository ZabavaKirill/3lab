<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Технологии графики в современных играх</title>
	<link rel="stylesheet" type="text/css" href="css/main.css">
	<script src="js/jquery-3.0.0.min.js"></script>
</head>
<body>
	<a href="#" title="Вернуться к началу" class="topbutton">Наверх</a>
	<header>
		<div class="container up">
			<h1>
				Обзор реализаций<br>
				3D-графики при разработке<br>
				компьютерных игр
			</h1>
			<div class="clearfix">
			<nav class="menu">
				<ul>
					<li>
						<a href="index.html">Главная<br></a>
					</li>
					<li>
						<a href="evolution.html">Краткая<br> эволюция игр</a>
					</li>
					<li>
						<a href="#">Технологии графики<br> в 	современных играх</a>
						<ul class="dropdown">
							<li><a href="part1.html">Часть 1</a></li>
							<li><a href="part2.html">Часть 2</a></li>
							<li><a href="part3.html">Часть 3</a></li>
						</ul>
					</li>
					<li>
						<a href="about me.html">Об авторе<br> </a>
					</li>
					</ul>
				</nav>
			</div>
		</div>
	</header>
	<section id="main">
		<div class="container">
			<div class="left-menu">
				<a href="#" class="menu-btn">
					<span></span>
				</a>
				<h3>Содержание</h3>
				<ol class="menu-list">
					<li><a href="#intro">Введение</a></li>
					<li><a href="#lens-flares">Блики на линзах</a></li>
					<li><a href="#sun-shafts">Sun Shafts</a></li>
					<li><a href="#fog">Туман по карте <br>глубины</a></li>
					<li><a href="#glow">Glow</a></li>
				</ol>
			</div>
			<div class="content">
			<h1>Часть 2:<br>Заря Past-Gen'а</h1>
			<h2 id="intro">Введение</h2>
			<p>В предыдущей части мы коснулись тех технологий, которые на сегодняшний день считаются «cutting-edge» (на самом гребне волны). Какие-то — больше, какие-то — меньше. В этой же мы рассмотрим тех «рядовых тружеников» графического фронта, которым не уделяется того же внимания просто потому, что они уже давно стали стандартом. Но без них, тем не менее, той «<a definition="Next-Gen - next generation, новое поколение консолей или технологий." href="term.html#Next-Gen">next-gen</a> графики», в ожидании которой замер сейчас весь мир, попросту не было бы. </p>
			<h2 id="lens-flares">Lens Flares - блики на линзах</h2>
			<p>Они были в играх задолго до появления Xbox 360 / PlayStation 3, но реализация их была на совершенно другом уровне - по сути, они представляли собой банальные <a definition="Спрайт - графический объект в компьютерной графике. Чаще всего — растровое изображение, которое можно отобразить на экране." href="term.html#Sprite">спрайты</a> (как на частицах), на которые натянута <a definition="Текстура - растровое изображение, накладываемое на поверхность полигональной модели для придания ей цвета, окраски или иллюзии рельефа." href="term.html#Texture">текстура</a> блика. Проблемы этого спрайтового метода настолько очевидны, что даже озвучивать их нет смысла. С приходом же <a definition="Past-Gen - past generation, консоли старого, предыдущего поколения." href="term.html#Past-Gen">Past-Gen'а</a> появилась возможность делать натуральные, киношные блики на линзах. Чем разработчки, разумеется, тут же не преминули воспользоваться.
			Рассказывать про Lens flares особенно нечего (если не касаться физики и того, как и откуда именно они берутся). Так что вот просто несколько великолепных примеров:</p>
			<div class="two_images clearfix">
			<a href="img/lens_flares.png"><img src="img/lens_flares.png" alt="Lens Flares"></a>
			<a href="img/lens_flares2.jpg"><img src="img/lens_flares2.jpg" alt="Lens Flares"></a></div>
			<p><b>On-lens grime/dirt</b> - просто часть эффекта Lens Flare, но она реализовывается немного по-другому, поэтому стоит её упомянуть. Это такие специфические блики, которые появляются, когда на линзах есть грязь / капли воды.</p>
			<p>Данная технология сама по себе — просто восхитительна. Главное — знать меру, и тогда она становится незаменимым художественно-выразительным средством, которое позволяет привнести в картинку потрясающую живописность.
			А рука об руку с фларами идёт их младший брат:</p>
			<h2 id="sun-shafts">Sun Shafts / God-Rays</h2>
			<a href="img/sun_shafts.jpg"><img src="img/sun_shafts.jpg" alt="Sun Shafts"></a>
			<p>Это такой эффект, который виден, когда пар или туман просвечивается лучами, пробивающимися, например, через листву. На самом деле, с реальной волюметрикой (объёмные явления вроде того же тумана) этот эффект не имеет ничего общего. И на деле является небольшой модификацией Zoom Blur, о котором было сказано в предыдущей части. Но он создаёт именно такую видимость чего-то объёмного и оттого придаёт картинке реализм.</p>
			<p>Если его использовать отдельно — это смотрится несколько странно. Потому что просвечивание атмосферы есть, а её самой — нет. Но зато если добавить ещё эффект тумана по глубине — будет бальзам на душу и радость для глаз <a definition="Геймер - человек, играющий в видеоигры, хотя сначала геймерами называли тех, кто играет только в ролевые или военные игры." href="term.html#Gamer">геймера</a>.</p>
			<h2 id="fog">Z-Depth Fog - туман по карте глубины.</h2>
			<a href="img/depth_fog.jpg"><img src="img/depth_fog.jpg" alt="Depth Fog"></a>
			<p>Этот эффект и создаёт ощущение присутствии атмосферы. Он хоть чуть-чуть — но должен быть всегда: хоть на панорамном пейзаже, хоть в камерном помещении. Его отсутствие резко бросается в глаза и создаёт ощущение, что мы находимся в безжизненном вакууме. Дело в том, что в воздухе всегда что-то есть – та же пыль и испарившаяся вода. Их может быть ничтожно мало, но какие-то частицы в воздухе есть всегда. Они настолько мелкие, что никогда не осядут и будут витать в атмосфере вечно. При относительно мелких размерах помещения эффект от них даже не виден. Но стоит выглянуть за окно — и сразу можно заметить, что здания на горизонте гораздо более бледные, чем поблизости. Причём, так обстоят дела не только в городах, коптящих атмосферу смогом, а вообще везде, где есть воздух. Так что для убедительной картинки наличие этого эффекта критически важно.</p>
			<p>Этот эффект использовался уже в Quake 3, с тех пор технология слегка изменилась, но общий принцип остался прежним: есть карта глубины, берётся основная картинка и к ней примешивается какой-нибудь цвет по этой карте. Но в результате атмосфера получается чересчур однородной. На каком-то расстоянии картинка полностью окрашивается в этот цвет и получается скучный тусклый фон.</p>
			<p>Неудивительно, что игроделы захотели исправить ситуацию. И первое (очевидное) решение — накладывать туман не везде, а только в определённых областях пространства. Ситуацию это исправило, но не сильно. Потом кто-то догадался модифицировать карту глубины в соответствии с экспоненциальным угасанием (поблизости сцена очень быстро окрашивается в туман, а дальше разница всё меньше и меньше). Наконец, приход паст-гена позволил накладывать на карту глубины текстуру (например, движущуюся фотографию реального дыма/пара) и окончательно украшать картинку дополнительными спрайтовыми частицами с клубящимся по земле дымом или бушующим в воздухе снегом.</p>
			<p>В результате — на сегодняшний день туман в играх уже очень похож на настоящий и действительно привносит в них атмосферу. Как в прямом, так и в переносном смысле.</p>
			<h2 id="glow">Glow / Bloom</h2>
			<p>Glow-эффект воссоздаёт рассеивание яркого света при его попадании на линзу или глаз. Если луч света очень яркий, то сам он в нашем глазу выглядит как пересвет, а вокруг него возникает «ореол»(лучше всего это видно на неоне). В графике это делается так: берётся изображение, его яркость делится на две части, которые в сумме дадут исходную картинку; та, что менее яркая — это картинка, обозначающая рассеянную часть света, поэтому её размывают и обе части складывают. В результате получается чёткая картинка, но со светлым ореолом вокруг наиболее ярких мест.</p>
			<p>Ещё проще можно сделать, если в самом начале не делить исходное изображение на 2 части, а взять оригинал в качестве основного компонента (100% исходника) и слегка затемнённую версию (40%) — в качестве рассеянного (размываемого) компонента. Очевидно, что после сборки итоговая яркость станет больше, чем была первоначально (140%), но обычно разработчики это учитывают и делают исходный <a definition="Рендернинг - термин в компьютерной графике, обозначающий процесс получения изображения по модели с помощью компьютерной программы." href="term.html#Rendering">рендер</a> чуть темнее, чем нужно в итоге.</p>
			<p>Как нетрудно заметить, glow, когда он накладывается на всю картинку, придаёт ей этакой сказочности. А если конкретнее — «затуманенности». Потому что так явно свет рассеивается только в тумане, причём довольно густом. Так что совмещать эти 2 эффекта — как говорится, сам бог послал. Дальше — больше. Если уж мы используем туман, то «делить» исходную картинку на чёткую и рассеиваемую составляющую — можно по карте глубины. Тогда то, что дальше в тумане — сильнее размоется чем то, что ближе. Наконец, можно вообще произвольно крутить две этих части для достижения желаемого эффекта. В таком случае нам очень пригодится HDR-рендеринг: с его помощью при разделении изображения мы сможем сохранить яркости выше 1, да и размоются они гораздо натуральнее. </p>
			<p>Но это — у добросовестных разработчиков. А нерадивые — идут на хитрость и под вывеской «HDR» — на самом деле рендерят самым первым способом (100%+40%), просто не везде, а по специально сделанной маске. Отсюда — и пересвет при включении этого типа-HDR. К слову, так уж повелось, что честной glow или простой glow на весь экран — так и называется. А вот когда glow'ятся не все объекты, или степень этого эффекта пропорциональна яркости пикселя (т.е., «на лету» генерируется карта glow по яркости) — это bloom. В результате — «настоящий» glow придаёт натуральности, а bloom — добавляет яркости в и без того яркие места. Т.е., пересвечивает картинку.</p>
		</div>
		</div>
	</section>
	<footer>	
	<div class="container">
		&copy; 2020г <a href="mailto:zabavakirill2000@yandex.ru">Забава Кирилл Николаевич</a> | <a href="map.html">Карта сайта</a> | <a href="term.html">Справочник</a> | <a href="source.html">Список источников</a>
</footer>
	<script type="text/javascript">
		$('.menu-btn').on('click', function(e) {
			e.preventDefault();
			$('.left-menu').toggleClass('menu-active');
			$('.content').toggleClass('content-active');
			$('.up').toggleClass('content-active');
		})
		$('.menu-list').on('click', function() {
			$('.left-menu').toggleClass('menu-active');
			$('.content').toggleClass('content-active');
			$('.up').toggleClass('content-active');
		})
	</script>
</body>
</html>